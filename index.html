<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Elle's Weekly Challenge</title>

	<style>
		* {
			box-sizing: border-box;
			margin: 0;
			padding: 0;
		}
		#container {
			display: flex;
			width: 100vw;
			height: 100vh;
		}
		#container div {
			flex-grow: 1;
		}
	</style>

	<script src="https://cdn.jsdelivr.net/npm/tone@latest/build/Tone.js"></script>
</head>
<body>

	<div id="container"></div>

	<script>
		let synth = new Tone.Synth().toDestination();
		function playRandomNote() {
			Tone.start();
			let notes = ["C", "D", "E", "F", "G", "A", "B"];
			let randomOctave = Math.round(Math.random() * 5 + 1);
			let randomNote = notes[Math.floor(Math.random() * notes.length)];
			synth.triggerAttackRelease(randomNote + randomOctave, "64n");
		}

		let container = document.querySelector("#container");
		function generateDivs() {

			container.innerHTML = "";

			let randomCount = Math.floor(Math.random() * 101);
			for (let i = 0; i < randomCount; i++) {
				
				let newElement = document.createElement("div");

				let red = Math.round(Math.random() * 255);
				let green = Math.round(Math.random() * 255);
				let blue = Math.round(Math.random() * 255);
				newElement.style.backgroundColor = `rgb(${red}, ${green}, ${blue})`;

				container.append(newElement);

				newElement.addEventListener('mouseenter', function() {
					playRandomNote();

					let red = Math.round(Math.random() * 255);
					let green = Math.round(Math.random() * 255);
					let blue = Math.round(Math.random() * 255);
					newElement.style.backgroundColor = `rgb(${red}, ${green}, ${blue})`;
				});
			}
		}

		generateDivs();
		setInterval(generateDivs, 1000);
	</script>
	
</body>
</html>
